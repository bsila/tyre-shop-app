{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Ivan\\\\Documents\\\\tyre-shop-app\\\\client\\\\src\\\\components\\\\pages\\\\AppointmentManager.js\",\n    _s = $RefreshSig$();\n\nimport \"../../App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport { Button } from \"@material-ui/core\";\nimport Popup from \"reactjs-popup\";\nimport \"reactjs-popup/dist/index.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Moment from \"react-moment\";\nimport { parse, format, toDate } from \"date-fns\";\nconst columns = [{\n  id: \"idorder\",\n  label: \"ID\",\n  minWidth: 15\n}, {\n  id: \"buyer_name\",\n  label: \"Ime\",\n  minWidth: 75\n}, {\n  id: \"buyer_surname\",\n  label: \"Prezime\",\n  minWidth: 75\n}, {\n  id: \"offer_code\",\n  label: \"Kod\",\n  minWidth: 15\n}, {\n  id: \"quantity\",\n  label: \"Količina\",\n  minWidth: 25\n}, {\n  id: \"e_mail\",\n  label: \"E-mail\",\n  minWidth: 75\n}, {\n  id: \"phone_no\",\n  label: \"Mobitel\",\n  minWidth: 50\n}, {\n  id: \"comments\",\n  label: \"Komentar\",\n  minWidth: 75\n}, {\n  id: \"service_date_time\",\n  label: \"Termin\",\n  minWidth: 50\n}];\nconst useStyles = makeStyles(theme => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 225\n  }\n}));\n\nfunction AppointmentManager() {\n  _s();\n\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [appointmentList, setAppointmentList] = useState([]);\n  const [appointmentDate, setAppointmentDate] = useState(format(toDate(new Date()), \"yyyy-MM-dd HH:mm\"));\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  useEffect(() => {\n    Axios.get(\"http://192.168.5.90:3001/api/getAppointments\").then(response => {\n      setAppointmentList(response.data);\n    });\n  }, []);\n\n  function refreshTableData() {\n    Axios.get(\"http://192.168.5.90:3001/api/getAppointments\").then(response => {\n      console.log(\"fjasofja\");\n      setAppointmentList(response.data);\n\n      for (var i = 0; i < appointmentList.length; ++i) {\n        console.log(appointmentList[i].idorder + \"\\n\");\n      }\n    });\n  }\n\n  function editAppointment(id) {\n    console.log(id);\n    console.log(\"edit\");\n  }\n\n  function deleteAppointment(id) {\n    console.log(id);\n    console.log(\"delete\");\n    Axios.delete(`http://localhost:3001/api/deleteAppointment/${id}`);\n  }\n\n  function string2date() {\n    let str = appointmentDate;\n    let date = Moment(str);\n    console.log(date.format(\"llll\"));\n  }\n\n  const classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"appointmentManager\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          stickyHeader: true,\n          \"aria-label\": \"sticky table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [columns.map(column => /*#__PURE__*/_jsxDEV(TableCell, {\n                align: column.align,\n                style: {\n                  minWidth: column.minWidth\n                },\n                children: column.label\n              }, column.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Izmjena termina\"\n              }, \"title_edit\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Brisanje termina\"\n              }, \"title_delete\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: appointmentList.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(row => {\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                hover: true,\n                role: \"checkbox\",\n                tabIndex: -1,\n                children: [columns.map(column => {\n                  const value = row[column.id] ? row[column.id] : \"/\";\n                  return /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: column.align,\n                    children: column.format && typeof value === \"number\" ? column.format(value) : value\n                  }, column.id + row[\"idorder\"], false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 27\n                  }, this);\n                }), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxDEV(Popup, {\n                    trigger: /*#__PURE__*/_jsxDEV(Button, {\n                      linkon: \"0\",\n                      buttonstyle: \"btn--primary\",\n                      children: \"IZMJENI\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 29\n                    }, this),\n                    maxWidth: \"200px\",\n                    maxHeight: \"auto\",\n                    modal: true,\n                    nested: true,\n                    contentStyle: {\n                      width: \"275px\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"header\",\n                        children: \" Odabir termina \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"content\",\n                        children: /*#__PURE__*/_jsxDEV(\"form\", {\n                          className: classes.container,\n                          noValidate: true,\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            id: \"datetime-local\",\n                            label: \"Uredi termin...\",\n                            type: \"datetime-local\",\n                            required: true,\n                            value: appointmentDate.toString().replace(\" \", \"T\") //\"2017-05-24T10:30\"\n                            ,\n                            className: classes.textField,\n                            InputLabelProps: {\n                              shrink: true\n                            },\n                            onChange: () => {\n                              setAppointmentDate(document.getElementById(\"datetime-local\").value);\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 168,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 167,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"actions\",\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          buttonstyle: \"btn--primary\",\n                          linkon: \"0\",\n                          onClick: () => {\n                            console.log(\"setdate \" + appointmentDate.toString());\n\n                            if (appointmentDate.toString()) {\n                              var result = parse(appointmentDate.toString().replace(\"T\", \" \"), \"yyyy-MM-dd HH:mm\", new Date());\n                              setAppointmentDate(result);\n                              console.log(\"result \" + format(result, \"yyyy-MM-dd HH:mm\"));\n                              console.log(\"appdate \" + format(appointmentDate, \"yyyy-MM-dd HH:mm\"));\n                            } else {\n                              alert(\"Nevaljan unos!\");\n                            }\n                          },\n                          children: \"POTVRDI\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 191,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 25\n                  }, this)\n                }, \"edit_appointment\" + row[\"idorder\"], false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    linkon: \"0\",\n                    onClick: () => {\n                      deleteAppointment(row[\"idorder\"]);\n                      refreshTableData();\n                      refreshTableData();\n                    },\n                    buttonstyle: \"btn--primary\",\n                    children: \"OBRI\\u0160I\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this)\n                }, \"delete_appointment\" + row[\"idorder\"], false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 23\n                }, this)]\n              }, row.code, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n        rowsPerPageOptions: [10, 25, 100],\n        component: \"div\",\n        count: appointmentList.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        onChangePage: handleChangePage,\n        onChangeRowsPerPage: handleChangeRowsPerPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AppointmentManager, \"kE+7BHss4WSjI6lQD2OJo9xL4m4=\", false, function () {\n  return [useStyles];\n});\n\n_c = AppointmentManager;\nexport default AppointmentManager;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppointmentManager\");","map":{"version":3,"sources":["C:/Users/Ivan/Documents/tyre-shop-app/client/src/components/pages/AppointmentManager.js"],"names":["React","useState","useEffect","Axios","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Button","Popup","makeStyles","TextField","Moment","parse","format","toDate","columns","id","label","minWidth","useStyles","theme","container","display","flexWrap","textField","marginLeft","spacing","marginRight","width","AppointmentManager","page","setPage","rowsPerPage","setRowsPerPage","appointmentList","setAppointmentList","appointmentDate","setAppointmentDate","Date","handleChangePage","event","newPage","handleChangeRowsPerPage","target","value","get","then","response","data","refreshTableData","console","log","i","length","idorder","editAppointment","deleteAppointment","delete","string2date","str","date","classes","map","column","align","slice","row","toString","replace","shrink","document","getElementById","result","alert","code"],"mappings":"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","sourcesContent":["import \"../../App.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Moment from \"react-moment\";\r\nimport { parse, format, toDate } from \"date-fns\";\r\n\r\nconst columns = [\r\n  { id: \"idorder\", label: \"ID\", minWidth: 15 },\r\n  { id: \"buyer_name\", label: \"Ime\", minWidth: 75 },\r\n  { id: \"buyer_surname\", label: \"Prezime\", minWidth: 75 },\r\n  { id: \"offer_code\", label: \"Kod\", minWidth: 15 },\r\n  { id: \"quantity\", label: \"Količina\", minWidth: 25 },\r\n  { id: \"e_mail\", label: \"E-mail\", minWidth: 75 },\r\n  { id: \"phone_no\", label: \"Mobitel\", minWidth: 50 },\r\n  { id: \"comments\", label: \"Komentar\", minWidth: 75 },\r\n  { id: \"service_date_time\", label: \"Termin\", minWidth: 50 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 225,\r\n  },\r\n}));\r\n\r\nfunction AppointmentManager() {\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [appointmentList, setAppointmentList] = useState([]);\r\n  const [appointmentDate, setAppointmentDate] = useState(\r\n    format(toDate(new Date()), \"yyyy-MM-dd HH:mm\")\r\n  );\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    Axios.get(\"http://192.168.5.90:3001/api/getAppointments\").then(\r\n      (response) => {\r\n        setAppointmentList(response.data);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  function refreshTableData() {\r\n    Axios.get(\"http://192.168.5.90:3001/api/getAppointments\").then(\r\n      (response) => {\r\n        console.log(\"fjasofja\");\r\n        setAppointmentList(response.data);\r\n        for (var i = 0; i < appointmentList.length; ++i) {\r\n          console.log(appointmentList[i].idorder + \"\\n\");\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  function editAppointment(id) {\r\n    console.log(id);\r\n    console.log(\"edit\");\r\n  }\r\n\r\n  function deleteAppointment(id) {\r\n    console.log(id);\r\n    console.log(\"delete\");\r\n\r\n    Axios.delete(`http://localhost:3001/api/deleteAppointment/${id}`);\r\n  }\r\n\r\n  function string2date() {\r\n    let str = appointmentDate;\r\n    let date = Moment(str);\r\n    console.log(date.format(\"llll\"));\r\n  }\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className=\"appointmentManager\">\r\n      <Paper>\r\n        <TableContainer>\r\n          <Table stickyHeader aria-label=\"sticky table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    align={column.align}\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n\r\n                <TableCell key=\"title_edit\">Izmjena termina</TableCell>\r\n                <TableCell key=\"title_delete\">Brisanje termina</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {appointmentList\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((row) => {\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      role=\"checkbox\"\r\n                      tabIndex={-1}\r\n                      key={row.code}\r\n                    >\r\n                      {columns.map((column) => {\r\n                        const value = row[column.id] ? row[column.id] : \"/\";\r\n\r\n                        return (\r\n                          <TableCell\r\n                            key={column.id + row[\"idorder\"]}\r\n                            align={column.align}\r\n                          >\r\n                            {column.format && typeof value === \"number\"\r\n                              ? column.format(value)\r\n                              : value}\r\n                          </TableCell>\r\n                        );\r\n                      })}\r\n\r\n                      <TableCell\r\n                        key={\"edit_appointment\" + row[\"idorder\"]}\r\n                        align=\"center\"\r\n                      >\r\n                        <Popup\r\n                          trigger={\r\n                            <Button linkon=\"0\" buttonstyle=\"btn--primary\">\r\n                              IZMJENI\r\n                            </Button>\r\n                          }\r\n                          maxWidth=\"200px\"\r\n                          maxHeight=\"auto\"\r\n                          modal\r\n                          nested\r\n                          contentStyle={{ width: \"275px\" }}\r\n                        >\r\n                          <div className=\"modal\">\r\n                            <div className=\"header\"> Odabir termina </div>\r\n                            <div className=\"content\">\r\n                              <form className={classes.container} noValidate>\r\n                                <TextField\r\n                                  id=\"datetime-local\"\r\n                                  label=\"Uredi termin...\"\r\n                                  type=\"datetime-local\"\r\n                                  required\r\n                                  value={appointmentDate\r\n                                    .toString()\r\n                                    .replace(\" \", \"T\")} //\"2017-05-24T10:30\"\r\n                                  className={classes.textField}\r\n                                  InputLabelProps={{\r\n                                    shrink: true,\r\n                                  }}\r\n                                  onChange={() => {\r\n                                    setAppointmentDate(\r\n                                      document.getElementById(\"datetime-local\")\r\n                                        .value\r\n                                    );\r\n                                  }}\r\n                                />\r\n                              </form>\r\n                            </div>\r\n\r\n                            <div className=\"actions\">\r\n                              <Button\r\n                                buttonstyle=\"btn--primary\"\r\n                                linkon=\"0\"\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"setdate \" + appointmentDate.toString()\r\n                                  );\r\n\r\n                                  if (appointmentDate.toString()) {\r\n                                    var result = parse(\r\n                                      appointmentDate\r\n                                        .toString()\r\n                                        .replace(\"T\", \" \"),\r\n                                      \"yyyy-MM-dd HH:mm\",\r\n                                      new Date()\r\n                                    );\r\n                                    setAppointmentDate(result);\r\n                                    console.log(\r\n                                      \"result \" +\r\n                                        format(result, \"yyyy-MM-dd HH:mm\")\r\n                                    );\r\n                                    console.log(\r\n                                      \"appdate \" +\r\n                                        format(\r\n                                          appointmentDate,\r\n                                          \"yyyy-MM-dd HH:mm\"\r\n                                        )\r\n                                    );\r\n                                  } else {\r\n                                    alert(\"Nevaljan unos!\");\r\n                                  }\r\n                                }}\r\n                              >\r\n                                POTVRDI\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        </Popup>\r\n                      </TableCell>\r\n\r\n                      <TableCell\r\n                        key={\"delete_appointment\" + row[\"idorder\"]}\r\n                        align=\"center\"\r\n                      >\r\n                        <Button\r\n                          linkon=\"0\"\r\n                          onClick={() => {\r\n                            deleteAppointment(row[\"idorder\"]);\r\n                            refreshTableData();\r\n                            refreshTableData();\r\n                          }}\r\n                          buttonstyle=\"btn--primary\"\r\n                        >\r\n                          OBRIŠI\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n\r\n        <TablePagination\r\n          rowsPerPageOptions={[10, 25, 100]}\r\n          component=\"div\"\r\n          count={appointmentList.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppointmentManager;\r\n"]},"metadata":{},"sourceType":"module"}